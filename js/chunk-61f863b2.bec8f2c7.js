(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61f863b2"],{"0418":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"header"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"\n              header_content\n              d-flex\n              flex-row\n              align-items-center\n              justify-content-start\n            "},[e._m(0),e._m(1),n("div",{staticClass:"\n    header_extra\n    d-flex\n    flex-row\n    align-items-center\n    justify-content-start\n    ml-auto\n  "},[n("div",{staticClass:"adminButton"},[n("router-link",{attrs:{to:"/admin"}},[e._v("\n                Admin\n              ")])],1),e._v("  \n            "),n("div",{class:[e.walletButtonClass,e.isConnected?e.connectClass:e.disConnectClass]},[n("a",{attrs:{href:"#"},on:{click:e.setWalletStatus}},[e._v(e._s(e.StatusButtonText))])])]),e._m(2)])])])])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("a",{attrs:{href:"#"}},[n("div",{staticStyle:{"vertical-align":"middle"}},[n("img",{attrs:{src:"images/logo.png",width:"30",height:"33"}}),e._v("  Vialend\n              ")]),n("div")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"main_nav"},[n("ul",{staticClass:"d-flex flex-row align-items-center justify-content-start"},[n("li",[n("a",{attrs:{href:"/dashboard"}},[e._v("Dashboard")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("Vote")])])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hamburger ml-auto"},[n("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])}],s={data:function(){return{isConnected:this.$store.state.isConnected,walletButtonClass:"walletButton",connectClass:"wallet_connected",disConnectClass:"wallet_disconnected",StatusButtonText:"Connect Wallet",centerDialogVisible:!1}},created:function(){this.getChainId(),""!==this.$store.state.StatusButtonText&&(this.StatusButtonText=this.$store.state.StatusButtonText)},mounted:function(){window.connectWallet=this.connectWallet,this.fn()},watch:{isConnected:function(e,t){console.log("newStatus=",e,";oldStatus=",t),this.$store.state.isConnected=e,console.log("this.$store.state.isConnected header watch=",this.$store.state.isConnected)}},methods:{fn:function(){var e=this;window.ethereum.autoRefreshOnNetworkChange=!1,window.ethereum.on("accountsChanged",(function(){console.log("accountsChanged"),e.connectWallet()})),window.ethereum.on("networkChanged",(function(){console.log("networkChanged"),e.getChainId(),e.networkChanged()}))},getChainId:function(){var e=this;web3.eth.getChainId().then((function(t){e.$store.state.chainId=t,console.log("ChainId:",t)}))},checkChain:function(){return 5===this.$store.state.chainId},networkChanged:function(){this.StatusButtonText="Connect Wallet",this.$store.state.StatusButtonText="Connect Wallet",this.isConnected=!1},lanuchApp:function(){this.centerDialogVisible=!1,this.$router.push({path:"/dashboard"})},setWalletStatus:function(){this.isConnected?(console.log("call disconnect"),this.isConnected=!1,this.StatusButtonText="Connect Wallet",this.$store.state.StatusButtonText="Connect Wallet"):ethereum.isConnected()&&null!=this.currentAccount?(this.isConnected=!0,console.log("this.currentAccount="+this.currentAccount),this.StatusButtonText=this.currentAccount,this.$store.state.StatusButtonText=this.currentAccount):this.connectWallet(),this.checkChain()||(this.StatusButtonText="Wrong network",this.$store.state.StatusButtonText="Wrong network",this.$message({message:"Please select Goerli Test Network.",type:"warning"}))},connectWallet:function(){if(!this.checkChain())return this.StatusButtonText="Wrong network",void(this.$store.state.StatusButtonText="Wrong network");console.log("call connectWallet"),ethereum.request({method:"eth_requestAccounts"}).then(this.handleAccountsChanged).catch((function(e){console.error(e)}))},handleAccountsChanged:function(e){0===e.length?console.log("Please connect to MetaMask."):e[0]!==this.currentAccount&&(this.currentAccount=e[0],this.isConnected=!0,this.StatusButtonText=this.currentAccount,this.$store.state.StatusButtonText=this.currentAccount,console.log("account status:"+ethereum.isConnected()))}}},r=s,i=(n("8baf"),n("2877")),c=Object(i["a"])(r,a,o,!1,null,null,null);t["a"]=c.exports},"26dd":function(e,t,n){"use strict";n("3469")},3469:function(e,t,n){},3530:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v(" Rebalance")]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTokensInfoStatus,expression:"loadingTokensInfoStatus"}],staticStyle:{width:"65%"}},[n("table",{staticClass:"table table-striped"},[n("thead",[n("tr",[n("th",[e._v("Token balance")]),n("th",[e._v("Wallet")]),n("th",[e._v("Vault")]),n("th",[e._v("Uni-V3")]),n("th",[e._v("Compound")])])]),n("tbody",[n("tr",[n("th",[e._v(e._s(e.token0Symbol))]),n("td",[e._v(e._s(Number(e.token0BalanceInWallet).toFixed(2)+" / $"+e.token0BalanceUSDInWallet.toFixed(2)))]),n("td",[e._v(e._s(Number(e.token0BalanceInVault).toFixed(2)+" / $"+e.token0BalanceUSDInVault.toFixed(2)))]),n("td",[e._v(e._s(Number(e.token0BalanceInPool).toFixed(2)+" / $"+e.token0BalanceUSDInPool.toFixed(2)))]),n("td",[e._v(e._s(Number(e.token0BalanceInLending).toFixed(2)+" / $"+e.token0BalanceUSDInLending.toFixed(2)))])]),n("tr",[n("th",[e._v(e._s(e.token1Symbol))]),n("td",[e._v(e._s(Number(e.token1BalanceInWallet).toFixed(2)+" / $"+e.token1BalanceUSDInWallet.toFixed(2)))]),n("td",[e._v(e._s(Number(e.token1BalanceInVault).toFixed(2)+" / $"+e.token1BalanceUSDInVault.toFixed(2)))]),n("td",[e._v(e._s(Number(e.token1BalanceInPool).toFixed(2)+" / $"+e.token1BalanceUSDInPool.toFixed(2)))]),n("td",[e._v(e._s(Number(e.token1BalanceInLending).toFixed(2)+" / $"+e.token1BalanceUSDInLending.toFixed(2)))])]),n("tr",[n("th",[e._v("USD")]),n("td",[e._v("$"+e._s((Number(e.token0BalanceUSDInWallet)+Number(e.token1BalanceUSDInWallet)).toFixed(2)))]),n("td",[e._v("$"+e._s((Number(e.token0BalanceUSDInVault)+Number(e.token1BalanceUSDInVault)).toFixed(2)))]),n("td",[e._v("$"+e._s((Number(e.token0BalanceUSDInPool)+Number(e.token1BalanceUSDInPool)).toFixed(2)))]),n("td",[e._v("$"+e._s((Number(e.token0BalanceUSDInLending)+Number(e.token1BalanceUSDInLending)).toFixed(2)))])])])])]),n("hr"),e._v("\n      Min Tick:"+e._s(e.tickLower)),n("br"),e._v("\n      Max Tick:"+e._s(e.tickUpper)),n("br"),e._v("\n      Current Tick:"+e._s(e.currentTick)),n("br"),n("span",{staticStyle:{color:"#ff0000","margin-right":"10px"}},[e._v("Current Price:"+e._s(e.currentPrice))]),n("el-button",{style:{display:e.rangeStatusDisplay},attrs:{size:"mini"}},[n("span",{class:[e.dotStyle,e.rangeStatusStyle]}),n("span",{staticClass:"status"},[e._v(e._s(e.rangeStatus))])]),n("br"),n("div",{staticClass:"block",staticStyle:{width:"65%","margin-top":"20px"}},[n("input",{staticClass:"js-range-slider",attrs:{type:"text",name:"my_range",value:""}})]),n("hr"),n("div",{staticClass:"range_title"},[e._v("Set Price Range")]),n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.rangeForm}},[n("el-form-item",{attrs:{label:"Min Price"}},[n("el-input-number",{attrs:{precision:1,step:.1},on:{change:e.minPriceChange},model:{value:e.rangeForm.minPrice,callback:function(t){e.$set(e.rangeForm,"minPrice",t)},expression:"rangeForm.minPrice"}}),n("br"),e._v("\n          "+e._s(e.token1Symbol)+" per "+e._s(e.token0Symbol)+"\n        ")],1),n("el-form-item",{attrs:{label:"Max Price"}},[n("el-input-number",{attrs:{precision:1,step:.1},on:{change:e.maxPriceChange},model:{value:e.rangeForm.maxPrice,callback:function(t){e.$set(e.rangeForm,"maxPrice",t)},expression:"rangeForm.maxPrice"}}),n("br"),e._v("\n          "+e._s(e.token1Symbol)+" per "+e._s(e.token0Symbol)+"\n        ")],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:e.rebalanceLoading},on:{click:e.doRebalance}},[e._v("Rebalance")]),e._v("\n            \n          "),n("a",{class:["btn","btn-primary",e.viewOnEtherscanDisable?"disabled":""],attrs:{href:e.goToEtherscan,target:"_blank",role:"button"}},[e._v("View on etherscan")])],1)],1),e._v("\n      "+e._s(e.errorRebalance)+"\n    ")],1),n("el-tab-pane",[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v(" Security")]),e._v("\n      remove all liquidity from uniswap\n    ")]),n("el-tab-pane",[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v(" Settings")]),n("div",{staticClass:"token_exchange_form"},[n("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("Currency Converter")]),n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"1"},model:{value:e.currTokenVal,callback:function(t){e.currTokenVal=t},expression:"currTokenVal"}})],1),n("el-form-item",[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.exchangeTokenChange},model:{value:e.currTokenId,callback:function(t){e.currTokenId=t},expression:"currTokenId"}},e._l(e.tokensList,(function(e){return n("el-option",{key:e.nameid,attrs:{label:e.symbol,value:e.symbol}})})),1)],1),e._v("\n          =\n          "),n("el-form-item",[n("el-input",{model:{value:e.usdTokenVal,callback:function(t){e.usdTokenVal=t},expression:"usdTokenVal"}})],1),e._v("USD\n        ")],1)],1),n("hr"),n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",[e._v("UniPortionRatio:")]),n("el-form-item",[n("el-input",{model:{value:e.uniPortionRatio,callback:function(t){e.uniPortionRatio=t},expression:"uniPortionRatio"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.SetUniPortionRatio}},[e._v("SetUniPortionRatio")])],1),n("br"),n("el-form-item",[e._v("MaxTotalSupply:")]),n("el-form-item",[n("el-input",{model:{value:e.maxTotalSupply,callback:function(t){e.maxTotalSupply=t},expression:"maxTotalSupply"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.SetMaxTotalSupply}},[e._v("SetMaxTotalSupply")])],1),n("br"),n("el-form-item",[e._v("Governance:")]),n("el-form-item",[n("el-input",{staticStyle:{width:"500px"},model:{value:e.governanceAddress,callback:function(t){e.governanceAddress=t},expression:"governanceAddress"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.SetGovernance}},[e._v("SetGovernance")]),n("el-button",{attrs:{type:"primary"},on:{click:e.acceptGovernance}},[e._v("AccecptGovernance")])],1),n("br"),n("el-form-item",[e._v("Team:")]),n("el-form-item",[n("el-input",{staticStyle:{width:"500px"},model:{value:e.teamAddress,callback:function(t){e.teamAddress=t},expression:"teamAddress"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.SetTeam}},[e._v("SetTeam")])],1),n("br"),n("el-form-item",[n("el-button",{attrs:{type:"warning"},on:{click:e.EmergencyBurn}},[e._v("EmergencyBurn")])],1)],1)],1)],1)],1)},o=[],s=(n("c5f6"),n("7f7f"),n("96cf"),n("1da1")),r=n("99e5"),i=n.n(r),c=n("0418"),l=n("0ad6"),u=n("f396"),p=n("bc3a"),h=n.n(p);"undefined"!==typeof web3?(web3=new i.a(web3.currentProvider),console.log("web3 provider:web3.currentProvider")):(web3=new i.a(new i.a.providers.HttpProvider("https://goerli.infura.io/v3/68070d464ba04080a428aeef1b9803c6")),console.log("web3 provider:goerli"));var m={components:{Header:c["a"]},data:function(){return{isConnected:this.$store.state.isConnected,keeperUniswapV3Contract:null,poolAddress:"",tickLower:0,tickUpper:0,currentTick:0,currentPrice:0,tickRange:[20,80],currentPercent:0,marks:{},rangeForm:{minPrice:0,maxPrice:0},errorRebalance:"",rebalanceLoading:!1,loadingTokensInfoStatus:!0,token0Contract:null,token1Contract:null,token0LendingContract:null,token1LendingContract:null,token0Address:"",token0Name:"",token0Symbol:"",token0Decimal:0,token0Balance:0,token1Address:"",token1Name:"",token1Symbol:"",token1Decimal:0,token0BalanceInWallet:0,token1BalanceInWallet:0,token0BalanceUSDInWallet:0,token1BalanceUSDInWallet:0,token0BalanceInVault:0,token1BalanceInVault:0,token0BalanceUSDInVault:0,token1BalanceUSDInVault:0,token0BalanceInPool:0,token1BalanceInPool:0,token0BalanceUSDInPool:0,token1BalanceUSDInPool:0,token0BalanceInLending:0,token1BalanceInLending:0,token0BalanceUSDInLending:0,token1BalanceUSDInLending:0,dotStyle:"dot",rangeStatusStyle:"",rangeStatusDisplay:"none",rangeStatus:"",tokensList:null,currTokenId:"BTC",currTokenVal:1,usdTokenVal:0,priceUSD:0,maxTotalSupply:0,uniPortionRatio:0,governanceAddress:"",teamAddress:"",viewOnEtherscanDisable:!0,transactionHash:"",goToEtherscan:"",accruedProtocolFees0:0,accruedProtocolFees1:0}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getTokensList(),e.next=3,this.$parent.keeperContract.methods.poolAddress().call();case 3:return this.poolAddress=e.sent,e.next=6,this.$parent.keeperContract.methods.token0().call();case 6:return this.token0Address=e.sent,e.next=9,this.$parent.keeperContract.methods.token1().call();case 9:return this.token1Address=e.sent,console.log("poolAddress=",this.poolAddress),console.log("token0Address=",this.token0Address),console.log("token1Address=",this.token1Address),this.token0LendingContract=new web3.eth.Contract(u,"0x20572e4c090f15667cF7378e16FaD2eA0e2f3EfF"),this.token1LendingContract=new web3.eth.Contract(u,"0xCEC4a43eBB02f9B80916F1c718338169d6d5C1F0"),this.token0Contract=new web3.eth.Contract(u,this.token0Address),this.token1Contract=new web3.eth.Contract(u,this.token1Address),this.keeperUniswapV3Contract=new web3.eth.Contract(l,this.poolAddress),e.next=20,this.getSlot0();case 20:this.getTokensInfo(),this.loadPriceRange(),this.getSettingData();case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},computed:{newMinPrice:function(){return this.rangeForm.minPrice},newMaxPrice:function(){return this.rangeForm.maxPrice},getMarks:function(){var e={};return 0!==this.currentPercent&&(e[this.currentPercent]=this.currentTick),e}},watch:{newMinPrice:function(e){console.log("new min price=",e),isNaN(e)?this.tickLower=0:this.tickLower=this.priceToTick(e),this.drawTickRangeChart()},newMaxPrice:function(e){console.log("new max price=",e),this.tickUpper=this.priceToTick(e),isNaN(e)?this.tickUpper=0:this.tickUpper=this.priceToTick(e),this.drawTickRangeChart()},"$store.state.isConnected":function(){this.isConnected=this.$store.state.isConnected,this.getTokensBalanceInWallet()},currTokenVal:function(e){""!==e&&(isNaN(e)||(console.log("currTokenVal=",e),this.usdTokenVal=e*this.priceUSD))},currentTick:function(e){this.drawTickRangeChart()}},methods:{getTokensList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:h.a.get("https://api.coinlore.net/api/tickers/").then((function(e){t.tokensList=e.data.data;for(var n=0;n<t.tokensList.length;n++)if(t.tokensList[n].symbol===t.currTokenId){t.usdTokenVal=t.tokensList[n].price_usd,t.priceUSD=t.tokensList[n].price_usd;break}console.log("tokensList length=",t.tokensList.length)}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getTokensInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a,o,s,r,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingTokensInfoStatus=!0,e.next=3,this.token0Contract.methods.name().call();case 3:return this.token0Name=e.sent,console.log("token0Name=",this.token0Name),e.next=7,this.token0Contract.methods.symbol().call();case 7:return this.token0Symbol=e.sent,console.log("token0Symbol=",this.token0Symbol),e.next=11,this.token0Contract.methods.decimals().call();case 11:return this.token0Decimal=e.sent,console.log("token0Decimal=",this.token0Decimal),e.next=15,this.token1Contract.methods.name().call();case 15:return this.token1Name=e.sent,console.log("token1Name=",this.token1Name),e.next=19,this.token1Contract.methods.symbol().call();case 19:return this.token1Symbol=e.sent,console.log("token1Symbol=",this.token1Symbol),e.next=23,this.token1Contract.methods.decimals().call();case 23:return this.token1Decimal=e.sent,console.log("token1Decimal=",this.token1Decimal),this.getTokensBalanceInWallet(),e.next=28,this.$parent.keeperContract.methods.cLow().call();case 28:return t=e.sent,e.next=31,this.$parent.keeperContract.methods.cHigh().call();case 31:return n=e.sent,e.next=34,this.$parent.keeperContract.methods.getPositionAmounts(BigInt(t),BigInt(n)).call();case 34:return a=e.sent,void 0!==a&&null!==a&&(this.token0BalanceInPool=a.amount0/Number(Math.pow(10,this.token0Decimal)),this.token0BalanceUSDInPool=Number(this.token0BalanceInPool)*Number(this.$store.state.token0RateOfUSD),this.token1BalanceInPool=a.amount1/Number(Math.pow(10,this.token1Decimal)),this.token1BalanceUSDInPool=Number(this.token1BalanceInPool)*Number(this.$store.state.token1RateOfUSD)),e.next=38,this.token0LendingContract.methods.exchangeRateStored().call();case 38:return o=e.sent,e.next=41,this.token1LendingContract.methods.exchangeRateStored().call();case 41:return s=e.sent,e.next=44,this.token0LendingContract.methods.balanceOf(this.$parent.vaultAddress).call();case 44:return r=e.sent,e.next=47,this.token1LendingContract.methods.balanceOf(this.$parent.vaultAddress).call();case 47:i=e.sent,c=r*o/Math.pow(10,18),l=i*s/Math.pow(10,18),console.log("underlying0=",c,"underlying1=",l),isNaN(c)||isNaN(l)||(this.token0BalanceInLending=c/Number(Math.pow(10,this.token0Decimal)),this.token0BalanceUSDInLending=Number(this.token0BalanceInLending)*Number(this.$store.state.token0RateOfUSD),this.token1BalanceInLending=l/Number(Math.pow(10,this.token1Decimal)),this.token1BalanceUSDInLending=Number(this.token1BalanceInLending)*Number(this.$store.state.token1RateOfUSD)),this.loadingTokensInfoStatus=!1;case 53:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTokensBalanceInWallet:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isConnected){e.next=4;break}this.$message("Please connect wallet!"),e.next=24;break;case 4:return e.next=6,this.token0Contract.methods.balanceOf(ethereum.selectedAddress).call();case 6:return t=e.sent,this.token0BalanceInWallet=(Number(t)/Number(Math.pow(10,this.token0Decimal))).toFixed(2),this.token0BalanceUSDInWallet=Number(this.token0BalanceInWallet)*Number(this.$store.state.token0RateOfUSD),e.next=11,this.$parent.keeperContract.methods.getBalance0().call();case 11:return n=e.sent,this.token0BalanceInVault=(Number(n)/Number(Math.pow(10,this.token0Decimal))).toFixed(2),this.token0BalanceUSDInVault=Number(this.token0BalanceInVault)*Number(this.$store.state.token0RateOfUSD),e.next=16,this.token1Contract.methods.balanceOf(ethereum.selectedAddress).call();case 16:return a=e.sent,this.token1BalanceInWallet=(Number(a)/Number(Math.pow(10,this.token1Decimal))).toFixed(2),this.token1BalanceUSDInWallet=Number(this.token1BalanceInWallet)*Number(this.$store.state.token1RateOfUSD),e.next=21,this.$parent.keeperContract.methods.getBalance1().call();case 21:o=e.sent,this.token1BalanceInVault=(Number(o)/Number(Math.pow(10,this.token1Decimal))).toFixed(2),this.token1BalanceUSDInVault=Number(this.token1BalanceInVault)*Number(this.$store.state.token1RateOfUSD);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadFees:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$parent.keeperContract.methods.AccumulateUniswapFees0().call();case 2:return t=e.sent,e.next=5,this.$parent.keeperContract.methods.AccumulateUniswapFees1().call();case 5:return n=e.sent,e.next=8,this.$parent.keeperContract.methods.accruedProtocolFees0().call();case 8:return this.accruedProtocolFees0=e.sent,e.next=11,this.$parent.keeperContract.methods.accruedProtocolFees1().call();case 11:this.accruedProtocolFees1=e.sent,console.log("accumulateUniswapFees0=",t),console.log("accumulateUniswapFees1=",n),console.log("accruedProtocolFees0=",this.accruedProtocolFees0),console.log("accruedProtocolFees1=",this.accruedProtocolFees1);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadPriceRange:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$parent.keeperContract.methods.cLow().call();case 3:return n=e.sent,e.next=6,this.$parent.keeperContract.methods.cHigh().call();case 6:a=e.sent,"0"!==n&&"0"!==a&&(this.tickLower=n,this.tickUpper=a,console.log("tickLower_price=",this.tickLower),console.log("tickUpper_price=",this.tickUpper)),this.rangeForm.minPrice=this.tickToPrice(this.tickLower),this.rangeForm.maxPrice=this.tickToPrice(this.tickUpper),console.log("maxPrice123=",this.rangeForm.maxPrice),parseFloat(this.rangeForm.maxPrice)+800,$(".js-range-slider").ionRangeSlider({skin:"big",type:"double",grid:!0,min:(parseFloat(this.rangeForm.minPrice)-230).toFixed(1),max:(parseFloat(this.rangeForm.maxPrice)+230).toFixed(1),from:this.rangeForm.minPrice,to:this.rangeForm.maxPrice,prefix:"$",step:.1,onChange:function(e){console.log("from=",e.from),t.rangeForm.minPrice=e.from,t.rangeForm.maxPrice=e.to}});case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),minPriceChange:function(e){$(".js-range-slider").data("ionRangeSlider").update({from:e})},maxPriceChange:function(e){$(".js-range-slider").data("ionRangeSlider").update({to:e})},drawTickRangeChart:function(){if(0!==this.tickLower&&0!==this.tickUpper){var e=this.tickLower-1e4,t=this.tickUpper+1e4,n=parseInt((this.tickLower-e)/(t-e)*100),a=parseInt((this.tickUpper-e)/(t-e)*100);this.currentPercent=parseInt((this.currentTick-e)/(t-e)*100),this.tickRange=[n,a],console.log("currentPercent=",this.currentPercent),this.tickLower>this.currentTick||this.tickUpper<this.currentTick?(this.rangeStatusStyle="outOfRange",this.rangeStatus="Out of range"):(this.rangeStatusStyle="inRange",this.rangeStatus="In range"),this.rangeStatusDisplay=""}},getSlot0:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==this.keeperUniswapV3Contract&&(t=this,this.keeperUniswapV3Contract.methods.slot0().call().then((function(e){void 0!==e&&null!==e&&""!==e&&(console.log("slot0="+JSON.stringify(e)),t.currentTick=e["tick"],t.currentPrice=n.tickToPrice(t.currentTick),console.log("currentTick0=",t.currentTick),0===t.tickLower||0===t.tickUpper?(console.log("currentTick1=",t.currentTick),t.tickLower=parseInt(t.currentTick)-1e3,t.tickUpper=parseInt(t.currentTick)+1e3,console.log("tickLower0=",t.tickLower,"tickUpper0=",t.tickUpper)):console.log("tickLower1=",t.tickLower,"tickUpper1=",t.tickUpper))})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),SetUniPortionRatio:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,n=!1,null!=this.$parent.keeperContract&&this.$parent.keeperContract.methods.setUniPortionRatio(BigInt(this.uniPortionRatio)).send({from:ethereum.selectedAddress,gasPrice:"80000000000",gas:6e5,value:0}).on("confirmation",(function(e,a){!1===n&&(t.$message("Set UniPortionRatio Successful!"),n=!0)})).on("receipt",(function(e){!1===n&&(t.$message("Set UniPortionRatio Successful!"),n=!0)})).on("error",(function(e){!1===n&&(t.$message.error(e),n=!0,console.log(e))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),SetMaxTotalSupply:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,n=!1,null!=this.$parent.keeperContract&&this.$parent.keeperContract.methods.setMaxTotalSupply(BigInt(this.maxTotalSupply)).send({from:ethereum.selectedAddress,gasPrice:"80000000000",gas:6e5,value:0}).on("confirmation",(function(e,a){!1===n&&(t.$message("Set MaxTotalSupply Successful!"),n=!0)})).on("receipt",(function(e){!1===n&&(t.$message("Set MaxTotalSupply Successful!"),n=!0)})).on("error",(function(e){!1===n&&(t.$message.error(e),n=!0,console.log(e))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),SetGovernance:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,n=!1,null!=this.$parent.keeperContract&&this.$parent.keeperContract.methods.setGovernance(this.governanceAddress).send({from:ethereum.selectedAddress,gasPrice:"80000000000",gas:6e5,value:0}).on("confirmation",(function(e,a){!1===n&&(t.$message("Set Governance Successful!"),n=!0)})).on("receipt",(function(e){!1===n&&(t.$message("Set Governance Successful!"),n=!0)})).on("error",(function(e){!1===n&&(t.$message.error(e),n=!0,console.log(e))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),acceptGovernance:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,n=!1,null!=this.$parent.keeperContract&&this.$parent.keeperContract.methods.acceptGovernance().send({from:ethereum.selectedAddress,gasPrice:"80000000000",gas:6e5,value:0}).on("confirmation",(function(e,a){!1===n&&(t.$message("Accept Governance Successful!"),n=!0)})).on("receipt",(function(e){!1===n&&(t.$message("Accept Governance Successful!"),n=!0)})).on("error",(function(e){!1===n&&(t.$message.error(e),n=!0,console.log(e))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),SetTeam:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,n=!1,null!=this.$parent.keeperContract&&this.$parent.keeperContract.methods.setTeam(this.teamAddress).send({from:ethereum.selectedAddress,gasPrice:"80000000000",gas:6e5,value:0}).on("confirmation",(function(e,a){!1===n&&(t.$message("SetTeam Successful!"),n=!0)})).on("receipt",(function(e){!1===n&&(t.$message("SetTeam Successful!"),n=!0)})).on("error",(function(e){!1===n&&(t.$message.error(e),n=!0,console.log(e))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),EmergencyBurn:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,n=!1,null!=this.$parent.keeperContract&&this.$parent.keeperContract.methods.emergencyBurn().send({from:ethereum.selectedAddress,gasPrice:"80000000000",gas:6e5,value:0}).on("confirmation",(function(e,a){!1===n&&(t.$message("Emergency Burn Successful!"),n=!0)})).on("receipt",(function(e){!1===n&&(t.$message("Emergency Burn Successful!"),n=!0)})).on("error",(function(e){!1===n&&(t.$message.error(e),n=!0,console.log(e))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),exchangeTokenChange:function(e){console.log("token change=",e);for(var t=0;t<this.tokensList.length;t++)if(this.tokensList[t].symbol===e){this.usdTokenVal=this.tokensList[t].price_usd,this.priceUSD=this.tokensList[t].price_usd,this.currTokenVal=1;break}},doRebalance:function(){if(this.isConnected){var e=this;this.rebalanceLoading=!0,(isNaN(this.rangeForm.minPrice)||this.rangeForm.minPrice<=0)&&this.$message({message:"Please input positive number greater than 0 in Min Price.",type:"warning"}),(isNaN(this.rangeForm.maxPrice)||this.rangeForm.maxPrice<=0)&&this.$message({message:"Please input positive number greater than 0 in Max Price.",type:"warning"}),null!=this.$parent.keeperContract&&(console.log("account address is "+ethereum.selectedAddress),console.log("this.rangeForm.tickLower=",60*Math.round(parseInt(this.tickLower)/60)),console.log("this.rangeForm.tickUpper=",60*Math.round(parseInt(this.tickUpper)/60)),this.$parent.keeperContract.methods.strategy1(BigInt(60*Math.round(parseInt(this.tickLower)/60)),BigInt(60*Math.round(parseInt(this.tickUpper)/60))).send({from:ethereum.selectedAddress,value:0}).on("confirmation",(function(t,n){e.rebalanceLoading&&(e.rebalanceLoading=!1,e.$message("rebalance confirmed!"),console.log("confirmation,confirmationNumber:"+t+",receipt:"+JSON.stringify(n)),null!=n&&(e.goToEtherscan="https://goerli.etherscan.io/tx/"+n.transactionHash,e.viewOnEtherscanDisable=!1),e.initData())})).on("receipt",(function(t){e.rebalanceLoading&&(e.rebalanceLoading=!1,e.$message("rebalance receipt!"),console.log("receipt:"+JSON.stringify(t)),null!=t&&(e.goToEtherscan="https://goerli.etherscan.io/tx/"+t.transactionHash,e.viewOnEtherscanDisable=!1),e.initData())})).on("error",(function(t){e.rebalanceLoading&&(e.rebalanceLoading=!1,e.$message.error(t))})))}else this.$message("Please connect wallet!")},priceToTick:function(e){return parseInt(Math.log(e/1e12)/Math.log(1.0001))},tickToPrice:function(e){return(Math.pow(1.0001,e)*Math.pow(10,12)).toFixed(1)},onSubmit:function(){console.log("submit!")},get_liquidity_0:function(e,t,n){return e*t*n/(n-t)},calculate_y:function(e,t,n){return e*(t-n)},calculate_c:function(e,t,n,a){return a/((t-1)*e*n+a)},calculate_d:function(e,t,n,a){return 1+a*(1-t)/(t*e*n)},getY:function(){var e=3879.97,t=300,n=5e3,a=1,o=Math.sqrt(e),s=Math.sqrt(t),r=Math.sqrt(n);console.log("Math.pow(p,0.5)=",Math.pow(e,.5),";sp=",o);var i=this.get_liquidity_0(a,o,r),c=this.calculate_y(i,o,s);console.log("amount of USDC y=",c);var l=r/o,u=c;console.log("ic=,",u);var p=this.calculate_d(e,l,a,c);console.log("id=",p);var h=Math.pow(u,2);console.log("C=",h);var m=Math.pow(p,2);console.log("D=",m),console.log("p_a=",m*e,",(",100*m," of P),p_b=",h*e,",(",100*h," of P")},getSettingData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$parent.keeperContract.methods.maxTotalSupply().call();case 2:return this.maxTotalSupply=e.sent,e.next=5,this.$parent.keeperContract.methods.governance().call();case 5:this.governanceAddress=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=m,k=(n("26dd"),n("2877")),g=Object(k["a"])(d,a,o,!1,null,"333d8a93",null);t["default"]=g.exports},"782e":function(e,t,n){},"8baf":function(e,t,n){"use strict";n("782e")},f396:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"mintingFinished","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cap","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"unpause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_amount","type":"uint256"}],"name":"mint","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"paused","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_subtractedValue","type":"uint256"}],"name":"decreaseApproval","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"finishMinting","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"pause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_addedValue","type":"uint256"}],"name":"increaseApproval","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"burner","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Burn","type":"event"},{"anonymous":false,"inputs":[],"name":"Pause","type":"event"},{"anonymous":false,"inputs":[],"name":"Unpause","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Mint","type":"event"},{"anonymous":false,"inputs":[],"name":"MintFinished","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"exchangeRateStored","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')}}]);
//# sourceMappingURL=chunk-61f863b2.bec8f2c7.js.map